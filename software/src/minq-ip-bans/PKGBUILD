
_pkgname=minq-ip-bans
pkgname="${_pkgname}-git"
pkgver=r266.dc63991339865f642000c9db0d33235b66b0cb4a
pkgrel=1
pkgdesc='IP banlist'
arch=(any)
license=('GPL')
# depends=(python python-beautifulsoup4 viu)
makedepends=(git)
# optdepends=('wezterm: an example terminal that supports full image resolution'
#             'python-minq-caching-thing-git: needed for the beta version')
provides=("${_pkgname}")

url="https://github.com/kuche1/arch-setup.git"
source=("git+$url")
md5sums=("SKIP")
_pkgdir="arch-setup/software/src/${_pkgname}"

pkgver() {
	cd "${_pkgdir}"
	printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse HEAD)"
}

package() {
	cd "${_pkgdir}"
	mkdir -p "${pkgdir}/opt/${pkgname}"
	cp -rf * "${pkgdir}/opt/${pkgname}"
	mkdir -p "${pkgdir}/usr/bin/"
	ln -s "/opt/${pkgname}/minq-ip-bans.py" "${pkgdir}/usr/bin/${_pkgname}"
	mkdir -p "${pkgdir}/usr/lib/systemd/system/"
	cp "${_pkgname}.service" "${pkgdir}/usr/lib/systemd/system/"
}
